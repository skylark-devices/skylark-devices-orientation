{"version":3,"sources":["skylark-devices-orientation-all.js"],"names":["define","obj1","path","obj2","split","length","ns","i","name","_attach","skylark","attach","obj","main","isDeviceOrientationSupported","Promise","resolve","window","listener","e","alpha","isNaN","removeEventListener","addEventListener","setTimeout","orientation"],"mappings":";;;;;;;g4BAAAA,EAAA,8BAAA,WACA,OAAA,SAAAC,EAAAC,EAAAC,GACA,iBAAAD,IACAA,EAAAA,EAAAE,MAAA,MAOA,IALA,IAAAC,EAAAH,EAAAG,OACAC,EAAAL,EACAM,EAAA,EACAC,EAAAN,EAAAK,KAEAA,EAAAF,GACAC,EAAAA,EAAAE,GAAAF,EAAAE,OACAA,EAAAN,EAAAK,KAGA,OAAAD,EAAAE,GAAAL,KAGAH,EAAA,uBACA,aACA,SAAAS,GACA,IAAAC,GACAC,OAAA,SAAAT,EAAAU,GACA,OAAAH,EAAAC,EAAAR,EAAAU,KAGA,OAAAF,IAGAV,EAAA,yBACA,QACA,SAAAU,GACA,OAAAA,IAEAV,EAAA,oBAAA,yBAAA,SAAAa,GAAA,OAAAA,IAEAb,EAAA,2CACA,oBACA,SAAAU,GAgCA,OAAAA,EAAAC,OAAA,uBACAG,6BA1BA,WACA,OAAA,IAAAC,QAAA,SAAAC,GACA,GAAA,2BAAAC,OAAA,CACA,IAAAC,EAAA,SAAAC,GACAA,GAAA,OAAAA,EAAAC,QAAAC,MAAAF,EAAAC,OACAJ,GAAA,GAGAA,GAAA,GAGAC,OAAAK,oBAAA,oBAAAJ,IAGAD,OAAAM,iBAAA,oBAAAL,GAAA,GAGAM,WAAAN,EAAA,UAGAF,GAAA,UAUAhB,EAAA,oCAAA,iBAAA,SAAAyB,GACA,OAAAA,IAEAzB,EAAA,+BAAA,oCAAA,SAAAa,GAAA,OAAAA","file":"../skylark-devices-orientation-all.js","sourcesContent":["define('skylark-langx-ns/_attach',[],function(){\r\n    return  function attach(obj1,path,obj2) {\r\n        if (typeof path == \"string\") {\r\n            path = path.split(\".\");//[path]\r\n        };\r\n        var length = path.length,\r\n            ns=obj1,\r\n            i=0,\r\n            name = path[i++];\r\n\r\n        while (i < length) {\r\n            ns = ns[name] = ns[name] || {};\r\n            name = path[i++];\r\n        }\r\n\r\n        return ns[name] = obj2;\r\n    }\r\n});\ndefine('skylark-langx-ns/ns',[\r\n    \"./_attach\"\r\n], function(_attach) {\r\n    var skylark = {\r\n    \tattach : function(path,obj) {\r\n    \t\treturn _attach(skylark,path,obj);\r\n    \t}\r\n    };\r\n    return skylark;\r\n});\r\n\ndefine('skylark-langx-ns/main',[\r\n\t\"./ns\"\r\n],function(skylark){\r\n\treturn skylark;\r\n});\ndefine('skylark-langx-ns', ['skylark-langx-ns/main'], function (main) { return main; });\n\ndefine('skylark-devices-orientation/orientation',[\r\n  \"skylark-langx-ns\"\r\n],function(skylark){\r\n\r\n  /**\r\n   * @summary Detects if device orientation is supported\r\n   * @description We can only be sure device orientation is supported once received an event with coherent data\r\n   * @returns {Promise<boolean>}\r\n   */\r\n   function isDeviceOrientationSupported() {\r\n    return new Promise(function(resolve) {\r\n      if ('DeviceOrientationEvent' in window) {\r\n        var listener = function(e) {\r\n          if (e && e.alpha !== null && !isNaN(e.alpha)) {\r\n            resolve(true);\r\n          }\r\n          else {\r\n            resolve(false);\r\n          }\r\n\r\n          window.removeEventListener('deviceorientation', listener);\r\n        };\r\n\r\n        window.addEventListener('deviceorientation', listener, false);\r\n\r\n        // after 2 secs, auto-reject the promise\r\n        setTimeout(listener, 2000);\r\n      }\r\n      else {\r\n        resolve(false);\r\n      }\r\n    });\r\n  }\r\n\r\n  return skylark.attach(\"devices.orientation\",{\r\n    isDeviceOrientationSupported\r\n  });\r\n\t\r\n});\ndefine('skylark-devices-orientation/main',[\"./orientation\"],function(orientation){\r\n\treturn orientation;\r\n});\ndefine('skylark-devices-orientation', ['skylark-devices-orientation/main'], function (main) { return main; });\n\n"]}